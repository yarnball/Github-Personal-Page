/**
 * Pie Chart jQuery plugin
 * @author WingArt team
 * @version 1.0
 **/
;(function(d){function e(b,c){this.config={animate:!1,fgColor:"#e5a01e",bgColor:null,thickness:10,rtl:!1,font:"Arial",fontSize:16,textVOffset:10,captionPosition:"inside",showPercentage:!0,percentagePosition:"bottom"};void 0!==c&&d.isPlainObject(c)&&d.extend(this.config,c);Object.defineProperty(this,"prepare",{value:function(){void 0===this.canvas&&(this.value=b.data("value"),this.caption=b.data("caption"),this.canvas=document.createElement("canvas"),b.append(this.canvas),this.packCanvas())},writable:!1,
configurable:!1,enumerable:!1});Object.defineProperty(this,"packCanvas",{value:function(){this.ctx=this.canvas.getContext("2d");this.canvas.height=this.canvas.width=this.oldWidth=this.oldHeight=this.config.size?this.config.size:b.outerWidth();this.config.showPercentage&&(this.canvas.height=this.oldHeight=this.canvas.height+this.config.fontSize+this.config.textVOffset);1<this._ratio&&(this.oldWidth=this.canvas.width,this.oldHeight=this.canvas.height,this.canvas.width=this.oldWidth*this._ratio,this.canvas.height=
this.oldHeight*this._ratio,this.canvas.style.width=this.oldWidth+"px",this.canvas.style.height=this.oldHeight+"px",this.ctx.scale(this._ratio,this._ratio));this.ctx.lineWidth=this.config.thickness;this.ctx.strokeStyle=this.config.fgColor;this.ctx.lineCap="round";this.ctx.textAlign="center";this.ctx.font=this.config.fontSize+"px "+this.config.font;this.ctx.width=this.canvas.width;this.ctx.height=this.canvas.height}});Object.defineProperty(this,"_ratio",{get:function(){return(window.devicePixelRatio||
1)/(this.ctx.webkitBackingStorePixelRatio||this.ctx.mozBackingStorePixelRatio||this.ctx.msBackingStorePixelRatio||this.ctx.oBackingStorePixelRatio||this.ctx.backingStorePixelRatio||1)}});Object.defineProperty(this,"offset",{value:0});Object.defineProperty(this,"centerX",{get:function(){return this.oldWidth/2}});Object.defineProperty(this,"centerY",{get:function(){return this.oldWidth/2}});Object.defineProperty(this,"radius",{get:function(){return(this.oldWidth-this.config.thickness)/2}});Object.defineProperty(this,
"toRadians",{value:function(a){return Math.PI/180*a},writable:!1,enumerable:!1,configurable:!1});Object.defineProperty(this,"toDegrees",{value:function(a){return 360*a/100},writable:!1,enumerable:!1,configurable:!1});Object.defineProperty(this,"renderFigure",{value:function(a){this.ctx.beginPath();this.ctx.arc(this.centerX,this.centerY,this.radius,0-this.toRadians(90),this.toRadians(this.toDegrees(a))-this.toRadians(90),this.config.rtl);this.ctx.stroke();this.ctx.closePath()},writable:!1,enumerable:!1,
configurable:!0});this.prepare();this.value&&this.render(this.value,this.config.animate)}Object.defineProperty(e.prototype,"reset",{value:function(){this.ctx.clearRect(0,0,this.ctx.width,this.ctx.height)}});Object.defineProperty(e.prototype,"render",{value:function(b,c){if(0>b||100<b)throw Error("Incorect value. The value must be in range from 0 to 100");this.reset();if(c){var a=this;a.currentValue=0;this.intervalID=setInterval(function(){a.currentValue++;a.reset();a.renderFigure(a.currentValue);
a.caption&&a.drawText(a.caption,a.centerX,a.centerY+a.config.fontSize/2);a.config.showPercentage&&a.drawText(a.currentValue+" %",a.centerX,a.oldHeight-1);a.currentValue===b&&(a.currentValue=0,clearInterval(a.intervalID))},7)}else this.reset(),this.renderFigure(b),this.caption&&this.drawText(this.caption,this.centerX,this.centerY+this.config.fontSize/2),this.config.showPercentage&&this.drawText(b+" %",this.centerX,this.oldHeight-1)}});Object.defineProperty(e.prototype,"drawText",{value:function(b,
c,a){this.ctx.fillText(b,c,a)}});d.fn.WTPieChart=function(b){return this.each(function(c,a){var f=d(a);f.data("pieChart")||f.data("pieChart",new e(f,b))})}})(jQuery);